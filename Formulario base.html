<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Registro de Paro – Célula de Esmaltado</title>
</head>

<body>

    <h1>Registro de Paro</h1>

    <form  method="get" action="">

        <!-- 1. Operario -->
        <fieldset>
            <legend><strong>Operario</strong></legend>

            <label for="operario">Nombre del operario:</label><br>
            <select id="operario" name="operario" required>
                <option value="">Seleccione</option>
                <option>German Muñoz</option>
                <option>Carlos Rua</option>
                <option>Dairon Vanegas</option>
                <option>Jonatan Estrada</option>
                <option>Felipe Cadavid</option>
                <option>Camilo Niño</option>
                <option>Faber Mesa</option>
                <option>Gustavo Moreno</option>
                <option>Juan Manuel Hernández</option>
            </select>
        </fieldset>

        <br>

        <!-- 2. Célula -->
        <fieldset>
            <legend><strong>Célula</strong></legend>

            <label for="celula">Número de célula:</label><br>
            <select id="celula" name="celula" required>
                <option value="">Seleccione</option>
                <option value="1">Célula 1</option>
                <option value="2">Célula 2</option>
                <option value="3">Célula 3</option>
                <option value="4">Célula 4</option>
            </select>
        </fieldset>

        <br>

        <!-- 3. Tipo de paro -->
        <fieldset>
            <legend><strong>Tipo de Paro</strong></legend>

            <input type="radio" id="operativo" name="tipo_evento" value="operativo" required>
            <label for="operativo">Operativo</label><br>

            <input type="radio" id="tecnico" name="tipo_evento" value="tecnico">
            <label for="tecnico">Técnico</label>
        </fieldset>

        <br>

        <!-- 4. Causa -->
        <fieldset>
             <legend><strong>Causa del Paro</strong></legend>

            <label for="causa">Seleccione la causa:</label><br>

             <!-- Causas células 1-2-3 -->
            <select id="causa_123" name="causa" style="display:none;" required>
                 <option value="">Seleccione</option>

                 <!-- Operativo -->
                <option>Descarga</option>
                <option>Carga</option>
                <option>Falta producción</option>

                <!-- Técnico -->
                <option>Conveyor entrada</option>
                <option>Sensores</option>
                <option>Escuadra</option>
                <option>Elevador 1</option>
                <option>Elevador 2</option>
                <option>Cadenas</option>
                <option>Conveyor salida</option>
                <option>Sensores conveyor de salida</option>
                <option>Motor de extracción</option>
                <option>Centralina</option>
                <option>Correas</option>
                <option>Esponjas</option>
                <option>Cabina</option>
                <option>Torretas</option>
                <option>Giostra</option>
                <option>Puertas cabina</option>
                <option>Sifón</option>
                <option>Sensor llenado</option>
                <option>Sensor presencia</option>
                <option>Cilindros de llenado</option>
                <option>Sistema llenado</option>
                <option>Bomba</option>
                <option>Tamiz</option>
                <option>Válvula fisher llenado</option>
                <option>Válvula fisher Sifon</option>
                <option>GDS</option>
                <option>Válvulas de GDS</option>
                <option>Sensores tanque</option>
                <option>Robot manipulador</option>
                <option>Pinzas</option>
                <option>Cilindros de pinzas</option>
                <option>Perfiles</option>
                <option>Angulos</option>
                <option>Robot esmaltador</option>
                <option>Pistola</option>

                <option>Otro (para futura causa)</option>
            </select>

            <!-- Causas célula 4 -->
            <select id="causa_4" name="causa" style="display:none;" required>
                <option value="">Seleccione</option>

                <!-- Operativo -->
                <option>Descarga</option>
                <option>Carga</option>
                <option>Falta producción</option>

                <!-- Técnico -->
                <option>Línea A</option>
                <option>Sensores Línea A</option>
                <option>Elevadores Línea A</option>
                <option>Servo Línea A</option>
                <option>Línea B</option>
                <option>Sensores Línea B</option>
                <option>Servo Línea B</option>
                <option>Elevadores Línea B</option>
                <option>Torreta 1</option>
                <option>Limpiador Torreta 1</option>
                <option>Torreta 2</option>
                <option>Limpiador Torreta 2</option>
                <option>Línea C</option>
                <option>Sensores Línea C</option>
                <option>Elevadores Línea C</option>
                <option>Motor de extracción</option>
                <option>Sifón</option>
                <option>Sensor llenado sifón</option>
                <option>Sensor presencia sifón</option>
                <option>Cilindros sifón</option>
                <option>Sistema llenado</option>
                <option>Bomba</option>
                <option>Tamiz</option>
                <option>Válvulas fisher sifón</option>
                <option>Válvulas fisher GDS</option>
                <option>GDS</option>
                <option>Pistola</option>
                <option>Válvulas PV de GDS</option>
                <option>Sensores tanque</option>

                <option>Otro (para futura causa)</option>
            </select>
        </fieldset>



        <br>

        <!-- 5. Duración -->
        <fieldset>
            <legend><strong>Duración</strong></legend>

            <label for="duracion">Duración del paro (minutos):</label><br>
            <input type="number" id="duracion" name="duracion_minutos" min="1" required>
        </fieldset>

        <br>

        <!-- 6. Envío -->
         <input type="hidden" name="estado" value="cerrado">

        <button type="submit" id="btnRegistrar" disabled>Registrar Paro</button>
        <p id="mensajeAyuda" style="color:red; display:none;">
        Seleccione célula y causa para continuar.
        </p>


    </form>

    <script>
        const celulaSelect = document.getElementById("celula");
        const causa123 = document.getElementById("causa_123");
        const causa4 = document.getElementById("causa_4");
        const btnRegistrar = document.getElementById("btnRegistrar");
        const mensajeAyuda = document.getElementById("mensajeAyuda");

        function actualizarCausas() {
            causa123.style.display = "none";
            causa4.style.display = "none";
            causa123.value = "";
            causa4.value = "";
            btnRegistrar.disabled = true;
            mensajeAyuda.style.display = "block";

            if (celulaSelect.value === "4") {
                causa4.style.display = "block";
            } else if (
                celulaSelect.value === "1" ||
                celulaSelect.value === "2" ||
                celulaSelect.value === "3"
            ) {
                causa123.style.display = "block";
            }
        }

        function validarFormulario() {
            if (
                (causa123.style.display === "block" && causa123.value !== "") ||
                (causa4.style.display === "block" && causa4.value !== "")
            ) {
                btnRegistrar.disabled = false;
                mensajeAyuda.style.display = "none";
            } else {
            btnRegistrar.disabled = true;
            mensajeAyuda.style.display = "block";
            }
        }

        celulaSelect.addEventListener("change", actualizarCausas);
        causa123.addEventListener("change", validarFormulario);
        causa4.addEventListener("change", validarFormulario);

        actualizarCausas();
    </script>

</body>
</html>
